<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sanco's Night Hunt - Tactical Monitor</title>
    <style>
        /* user-select and touch-action prevent zooming and highlighting on mobile */
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Courier New', monospace; cursor: none; touch-action: none; -webkit-user-select: none; user-select: none; }
        canvas { display: block; }
        
        #ui { position: absolute; top: 20px; left: 20px; color: #0f0; font-size: clamp(16px, 4vw, 20px); text-shadow: 0 0 5px #0f0; pointer-events: none; z-index: 10; }
        
        #game-over {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0, 20, 0, 0.95); padding: 30px; border: 2px solid #0f0;
            text-align: center; display: none; width: 85%; max-width: 400px; color: #0f0; z-index: 100;
        }
        .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; font-weight: bold; text-decoration: none; cursor: pointer; border: 1px solid #0f0; background: transparent; color: #0f0; text-transform: uppercase; box-sizing: border-box; }
        .btn:hover, .btn:active { background: #0f0; color: #000; }
        .sponsor-text { font-size: 14px; color: #0a0; margin: 20px 0 5px 0; }
    </style>
</head>
<body>

<div id="ui">MONITOR_FEED // SCORE: <span id="score">0</span> // TIME: <span id="timer">60</span>s</div>

<div id="game-over">
    <h1 style="margin-top:0; letter-spacing: 2px;">FEED DISCONNECTED</h1>
    <p id="final-stats"></p>
    <p class="sponsor-text">Watch the real pros in the field:</p>
    <a class="btn" href="https://www.youtube.com/@SancoOutdoors" target="_blank">ðŸŽ¬ SUB TO SANCO</a>
    <p class="sponsor-text">Support the school:</p>
    <a class="btn" href="https://www.sanangelogives.org/organization/emmanuelschooloffinearts" target="_blank">ðŸŽ» TIP ESOFA</a>
    <button class="btn" style="border-color: #555; color: #555;" onclick="location.reload()">RE-SYNC FEED</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

let score = 0;
let timeLeft = 60;
let gameActive = true;
let flashOpacity = 0;
const deerArray = [];

const trees = Array.from({length: 45}, () => ({
    x: Math.random() * window.innerWidth,
    y: window.innerHeight - 100,
    w: 10 + Math.random() * 20,
    h: 200 + Math.random() * 500,
    shade: 5 + Math.floor(Math.random() * 12)
}));

let mouseX = canvas.width/2, mouseY = canvas.height/2;

// Desktop Mouse Movement
window.addEventListener('mousemove', e => { 
    mouseX = e.clientX; 
    mouseY = e.clientY; 
});

// Firing Logic (Reusable for Desktop and Mobile)
function shoot(x, y) {
    if (!gameActive) return;
    mouseX = x; 
    mouseY = y;
    flashOpacity = 0.6; 
    for (let i = deerArray.length - 1; i >= 0; i--) {
        let d = deerArray[i];
        let dx = x - (d.x + d.w/2);
        let dy = y - (d.y + d.h/2);
        if (Math.sqrt(dx*dx + dy*dy) < 70) { // Slightly bigger hit-box for fat fingers
            score += 10;
            deerArray.splice(i, 1);
            document.getElementById('score').innerText = score;
        }
    }
}

// Desktop Click
window.addEventListener('mousedown', e => shoot(e.clientX, e.clientY));

// Mobile Tap
window.addEventListener('touchstart', e => {
    e.preventDefault(); // Prevents screen from moving when tapping
    shoot(e.touches[0].clientX, e.touches[0].clientY);
}, {passive: false});

function drawDeer(d) {
    ctx.save();
    ctx.translate(d.x, d.y);
    if (d.speed < 0) { ctx.scale(-1, 1); ctx.translate(-d.w, 0); }
    let walk = Math.sin(d.frame) * 4;

    let bodyGrad = ctx.createRadialGradient(45, 35, 5, 45, 40, 35);
    bodyGrad.addColorStop(0, '#4f4');
    bodyGrad.addColorStop(1, '#080');
    ctx.fillStyle = bodyGrad;
    ctx.beginPath(); ctx.ellipse(45, 38, 36, 14, 0, 0, Math.PI * 2); ctx.fill();

    ctx.fillStyle = '#0a0';
    ctx.fillRect(22, 48, 2, 28 + walk); ctx.fillRect(34, 48, 2, 28 - walk);
    ctx.fillRect(58, 48, 2, 28 + walk); ctx.fillRect(70, 48, 2, 28 - walk);

    ctx.fillStyle = '#3f3';
    ctx.beginPath(); ctx.moveTo(70, 38); ctx.quadraticCurveTo(82, 35, 95, 10);
    ctx.lineTo(112, 16); ctx.lineTo(106, 6); ctx.lineTo(90, 5); ctx.fill();
    
    ctx.strokeStyle = '#6f6'; ctx.lineWidth = 2; ctx.beginPath();
    ctx.moveTo(92, 5); ctx.quadraticCurveTo(80, -30, 110, -50);
    ctx.moveTo(96, 5); ctx.quadraticCurveTo(110, -30, 130, -40); ctx.stroke();
    ctx.restore();
}

function spawnDeer() {
    if (!gameActive) return;
    let dir = Math.random() > 0.5 ? 1 : -1;
    deerArray.push({
        x: dir === 1 ? -150 : canvas.width + 150,
        y: canvas.height - 250 + (Math.random() * 60),
        speed: (2 + Math.random() * 3) * dir,
        w: 120, h: 100, frame: 0
    });
    setTimeout(spawnDeer, 2200 - Math.min(score * 8, 1400));
}

function update() {
    if (!gameActive) return;
    deerArray.forEach((d, i) => {
        d.x += d.speed;
        d.frame += 0.12;
        if (d.x > canvas.width + 300 || d.x < -300) deerArray.splice(i, 1);
    });
    if (flashOpacity > 0) flashOpacity -= 0.08;
    draw();
    requestAnimationFrame(update);
}

function draw() {
    ctx.fillStyle = '#001a00'; ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Dynamic Tree Y-position based on screen size
    trees.forEach(t => {
        ctx.fillStyle = `rgb(0, ${t.shade}, 0)`;
        ctx.fillRect(t.x, canvas.height - 100, t.w, t.h);
    });

    deerArray.forEach(drawDeer);

    if (flashOpacity > 0) {
        ctx.fillStyle = `rgba(255, 255, 255, ${flashOpacity})`;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    ctx.strokeStyle = '#0f0'; ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(mouseX - 30, mouseY); ctx.lineTo(mouseX + 30, mouseY);
    ctx.moveTo(mouseX, mouseY - 30); ctx.lineTo(mouseX, mouseY + 30);
    ctx.stroke();
    ctx.beginPath(); ctx.arc(mouseX, mouseY, 15, 0, Math.PI * 2); ctx.stroke();

    let grad = ctx.createRadialGradient(canvas.width/2, canvas.height/2, canvas.width/4, canvas.width/2, canvas.height/2, Math.max(canvas.width, canvas.height));
    grad.addColorStop(0, 'rgba(0,255,0,0)');
    grad.addColorStop(1, 'rgba(0,0,0,0.7)');
    ctx.fillStyle = grad; ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "rgba(0, 255, 0, 0.03)";
    for(let i=0; i<canvas.height; i+=4) { ctx.fillRect(0, i, canvas.width, 1); }
}

setInterval(() => {
    if (!gameActive) return;
    timeLeft--;
    document.getElementById('timer').innerText = timeLeft;
    if (timeLeft <= 0) {
        gameActive = false;
        document.getElementById('final-stats').innerText = `TAGS: ${score/10} // TOTAL: ${score}`;
        document.getElementById('game-over').style.display = 'block';
        document.body.style.cursor = 'default'; // Bring cursor back for UI
    }
}, 1000);

spawnDeer();
update();
</script>
</body>
</html>
